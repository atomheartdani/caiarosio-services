<div class="container">
  <mat-card>
    <mat-card-content>
      <app-loader [isLoading]="dataSource.isLoading$ | async" [size]="3"></app-loader>
      <div class="error-message" *ngIf="dataSource.hasError$ | async">
        <h2 class="mat-h2">Errore nel caricamento dei dati</h2>
      </div>
      <div class="mat-elevation-z8">
        <mat-table [dataSource]="dataSource">
          <ng-container matColumnDef="title">
            <mat-header-cell *matHeaderCellDef>
              <mat-label>Titolo</mat-label>
            </mat-header-cell>
            <mat-cell *matCellDef="let element">
              {{ element.title }}
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="date">
            <mat-header-cell *matHeaderCellDef>
              <mat-label>Data</mat-label>
            </mat-header-cell>
            <mat-cell *matCellDef="let element">
              {{ element.date }}
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="region">
            <mat-header-cell *matHeaderCellDef>
              <mat-label>Regione</mat-label>
            </mat-header-cell>
            <mat-cell *matCellDef="let element">
              {{ element.region }}
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="zone">
            <mat-header-cell *matHeaderCellDef>
              <mat-label>Zona</mat-label>
            </mat-header-cell>
            <mat-cell *matCellDef="let element">
              {{ element.zone }}
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="actions">
            <mat-header-cell *matHeaderCellDef>
              <mat-label></mat-label>
            </mat-header-cell>
            <mat-cell *matCellDef="let element" class="actions">
              <button mat-button color="primary" (click)="edit(element.id)"><mat-icon>edit</mat-icon></button>
            </mat-cell>
          </ng-container>

          <mat-header-row *matHeaderRowDef="columns"></mat-header-row>
          <mat-row *matRowDef="let row; columns: columns"></mat-row>
        </mat-table>

        <mat-paginator
          [length]="dataSource.totalElements$ | async"
          [pageSize]="25"
          [pageSizeOptions]="[10, 25, 50, 100]"
          showFirstLastButtons
        ></mat-paginator>
      </div>
    </mat-card-content>
  </mat-card>
</div>
